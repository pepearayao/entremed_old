FROM python:3.10.13-bookworm

COPY ./requirements.txt .

RUN pip3 install --upgrade pip
RUN pip3 install -r ./requirements.txt

ENV RAW_JOBS_API_ROOT_URL=http://api-raw-jobs
ENV RAW_JOBS_API_PORT=8000
ENV RAW_JOBS_API_JOBS_EXTENSION=/jobs
ENV RAW_JOBS_API_AUTH_EXTENSION=/auth
ENV RAW_JOBS_API_USERNAME=scrapyd
ENV RAW_JOBS_API_PASSWORD=91c3f69fa077a50550426a944ca80e6759c69c0a65b071e56d07fcf02cfffa5d

ENV SCRAPYD_API_ROOT_URL=http://scrapper
ENV SCRAPYD_API_PORT=6800
ENV SCRAPYD_API_USERNAME=scrapyd
ENV SCRAPYD_API_PASSWORD=474c7419e9febbccaecb466e8e231abe0fc219d0c75db73c46859c7670b87716
ENV SCRAPYD_API_SCHEDULE_EXTENSION=/schedule.json

ENV WATCHDOG_API_ROOT_URL=http://api-watchdog
ENV WATCHDOG_API_PORT=8000
ENV WATCHDOG_API_USERNAME=scrapyd
ENV WATCHDOG_API_PASSWORD=80277590a588d350dad7c684b99846e237e2a39146108efaf318cf443c825477
ENV WATCHDOG_API_LOGS_SPIDERS_EXTENSION=/logs/spiders
ENV WATCHDOG_API_LOGS_ERRORS_EXTENSION=/logs/errors
ENV WATCHDOG_API_LOGS_MESSAGES_EXTENSION=/logs/messages
ENV WATCHDOG_API_AUTH_EXTENSION=/auth

# TELEGRAM API ACCESS KEYS
ENV TELEGRAM_BOT_TOKEN=5684503552:AAGvTyhnPwXui2Y0udDsuKAzpHKMHiOhEPY
ENV TELEGRAM_ALERT_CHANNEL_ID=14736770



WORKDIR /app

CMD ["python3", "/app/scheduler.py"]